{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"43225005-d66d61a579372833bf726388e\";\n\nimport axios from \"axios\";\n\nexport async function fetchImages(nameImg, page, perPage = 15) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: nameImg,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    });\n\n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`);\n        console.log(\"totalHits:\", response.data.totalHits);\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}\n","export function createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, views, downloads, likes, comments }) => `\n    <li class=\"imageItme\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"imgAdd\" src=\"${webformatURL}\" alt=\"${tags}\">\n    <ul class=\"imgInfo\">\n    <li class=\"info_item\"><p>Likes</p>${likes}</li>\n    <li class=\"info_item\"><p>Views</p>${views}</li>\n    <li class=\"info_item\"><p>Comments</p>${comments}</li>\n    <li class=\"info_item\"><p>Downloads</p>${downloads}</li>\n    </ul>\n    </a>\n    </li>\n`).join(\"\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { createMarkup } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst list = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst input = document.querySelector('#nameImg');\nconst btnLoadMore = document.querySelector(\".btn_load_more\")\n\nform.addEventListener(\"submit\", handleSubmit);\n\nlet inputValue = \"\";\nlet currentPage = 1;\nfunction handleSubmit(event) {\n    event.preventDefault();\n    let currentPage = 1;\n    inputValue = input.value;\n    btnLoadMore.style.display = 'none';\n    list.innerHTML = \"\";\n    if (input.value === \"\") {\n        iziToast.error({\n            position: 'topRight',\n            message: 'The field is empty! Enter image name!',\n        });\n        return;\n    } \n    const { nameImg } = event.currentTarget.elements;\n\n\n    fetchImages(nameImg.value, currentPage)\n        .then(data => {\n            if (data.total === 0) {\n                iziToast.error({\n                    position: 'topRight',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n            }\n            if (data.total === 0 || data.totalHits <= currentPage * 15) {\n                btnLoadMore.style.display = 'none';\n            }\n            list.innerHTML = createMarkup(data.hits);\n            initializeLightbox();\n        })\n        .catch(error => alert(error))\n        .finally(() => {\n            loader.style.display = 'none';\n        });\n    btnLoadMore.style.display = 'block';\n    input.value = \"\";\n}\nfunction initializeLightbox() {\n    let gallery = new SimpleLightbox('.gallery a', {\n        overlayOpacity: 0.8,\n        scrollZoom: false,\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    gallery.refresh();\n}\n\nbtnLoadMore.addEventListener(\"click\", loadMore);\n\n\nfunction loadMore() {\n    currentPage++;\n    fetchImages(inputValue, currentPage)\n        .then(data => {\n            if (data.total === 0 || data.totalHits <= currentPage * 15) {\n                btnLoadMore.style.display = 'none';\n                iziToast.warning({\n                    position: 'topRight',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n            } else {\n                const cardHeight = document.querySelector('.imageItme').getBoundingClientRect().height;\n                list.innerHTML += createMarkup(data.hits);\n                initializeLightbox();\n                window.scrollBy({\n                    top: 2 * cardHeight,\n                    behavior: 'smooth'\n                });\n            }\n        })\n        .catch(error => alert(error))\n        .finally(() => {\n            loader.style.display = 'none';\n        });\n}\n"],"names":["BASE_URL","API_KEY","fetchImages","nameImg","page","perPage","params","response","axios","error","createMarkup","arr","webformatURL","largeImageURL","tags","views","downloads","likes","comments","form","list","loader","input","btnLoadMore","handleSubmit","inputValue","currentPage","event","iziToast","data","initializeLightbox","SimpleLightbox","loadMore","cardHeight"],"mappings":"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"}